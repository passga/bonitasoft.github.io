<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Install a Bonita BPM cluster :: Bonita Documentation</title>
    <link rel="canonical" href="https://bonitasoft.github.io/bonita/7.5/install-a-bonita-bpm-cluster">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/stylesheets/site.css">
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.css"
    />
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <div class="navbar-item">
        <a class="bonita-logo" href="https://bonitasoft.github.io"></a>
      </div>

    </div>

    <div class="search-content">
      <fieldset>
        <input type="text" id="search-bar" placeholder="Search..." />
        <div class="icons-container">
          <div id="search-icon"></div>
        </div>
      </fieldset>
    </div>

    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-item is-hoverable">
        <a href="https://community.bonitasoft.com/" class="navbar-link">Community</a>
      </div>
      <div class="navbar-item is-hoverable">
        <a class="navbar-link" href="/bonita/7.5/">Bonita</a>
      </div>
      <div class="navbar-item is-hoverable">
        <a class="navbar-link" href="/bici/latest/">Bonita ICI</a>
      </div>
    </div>

    <div class="navbar-item search-item hide-for-print">
      <input type="text" placeholder="Search Docs" class="search-bar query ds-input" id="search-query">
      <i class="search-icon" aria-hidden="true"></i>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="bonita" data-version="7.5">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="./">Bonita</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="release-notes">Release notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migration-tool">Migration tool change log</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Application and Process Design</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bonita-bpm-overview">Bonita BPM overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Application and process design overview</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="getting-started-tutorial">Getting started tutorial</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="key-concepts">Key concepts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="comparison-of-7-x-and-6-x">Comparison of 7.x and 6.x</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lifecycle-and-profiles">Lifecycle and profiles</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="design-methodology">Design methodology</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bonita-bpm-studio-preferences">Bonita BPM Studio preferences</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bonita-bpm-studio-hints-and-tips">Bonita BPM Studio hints and tips</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Process modeling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Diagrams</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="diagram-overview">Diagram overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="pools-and-lanes">Pools and lanes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="diagram-tasks">Tasks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="gateways">Gateways</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="transitions">Transitions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="events">Events</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="called-processes">Called processes</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="event-subprocesses">Event subprocesses</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="text-annotations">Text annotations</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="migrate-a-process-from-bonita-open-solution-5-x">Migrate a process from Bonita Open Solution 5.x</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="naming-conventions">Naming conventions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="generate-process-documentation">Generate process documentation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="refactoring">Refactoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="actors">Actors</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="actor-filtering">Actor filters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="iteration">Iteration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Data</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="data-handling-overview">Data handling overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="define-and-deploy-the-bdm">Define and deploy the BDM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="specify-data-in-a-process-definition">Specify data in a process definition</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="parameters">Parameters</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="contracts-and-contexts">Contracts and contexts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="documents">Documents</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="create-a-complex-data-type">Complex data types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="define-a-search-index">Define a search key</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="expressions-and-scripts">Expressions and scripts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="operations">Operations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Page and form development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="page-and-form-development-overview">Page and form development overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">UI Designer</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="ui-designer-overview">UI Designer overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="create-or-modify-a-page">Create or modify UI artifacts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="widgets">Widgets</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="widget-properties">Widget properties</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Widget use examples</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="repeat-a-container-for-a-collection-of-data">Repeat a container for a collection of data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="fragments">Fragments</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="custom-widgets">Custom widgets</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="variables">Variables</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="appearance">Appearance</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="assets">Assets</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="multi-language-pages">Multi-language pages</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="migrate-a-form-from-6-x">Migrate a form from 6.x</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="6-x-legacy-forms">6.x legacy forms</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="applicationCreation">Application descriptor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectivity</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="connectivity-overview">Connectivity overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="alfresco">Alfresco</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cmis">CMIS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Database</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="list-of-database-connectors">List of database connectors</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="database-connector-configuration">Database connector configuration</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="graphical-query-builder">Graphical query builder</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="initialize-a-variable-from-a-database-without-scripting-or-java-code">Initialize a variable from a database without scripting or Java code</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="insert-data-in-a-docx-odt-template">Insert data in a .docx/.odt template</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="google-calendar">Google Calendar</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="jasper-5">Jasper</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ldap">LDAP</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="messaging">Messaging</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="generate-pdf-from-an-office-document">Generate PDF from an Office document</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="salesforce">Salesforce</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sap-jco-2">SAP JCo 2</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sap-jco-3">SAP JCo 3</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="script">Script</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sugar-crm">SugarCRM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="talend-job-launcher">Talend Job launcher</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="talend-tis-job-launcher">Talend TIS Job launcher</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="twitter">Twitter</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Web service</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="web-service-connector-overview">Web service connector overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="web-service-tutorial">Web service connector tutorial</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Organization</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="organization-overview">Organization overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="approaches-to-managing-organizations-and-actor-mapping">Approaches to managing organizations and actor mapping</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="organization-management-in-bonita-bpm-studio">Organization management in Bonita BPM Studio</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="custom-user-information-in-bonita-bpm-studio">Custom User Information in Bonita BPM Studio</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ldap-synchronizer">LDAP synchronizer</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reporting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="reporting-overview">Reporting overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="set-up-a-reporting-database">Set up a reporting database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="set-up-kpis">Set up KPIs</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="create-a-report">Create a report</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="import-and-export-a-process">Import and export a process</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Process configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="process-configuration-overview">Process configuration overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="environments">Environments</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configuring-a-process">Configure a process</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manage-jar-files">Manage JAR files</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="managing-dependencies">Manage dependencies</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Process testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="process-testing-overview">Process testing overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configure-a-test-organization">Configure a test organization</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="run-a-process-from-bonita-bpm-studio-for-testing">Run a process from Bonita BPM Studio for testing</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="log-files">Log files</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="build-a-process-for-deployment">Build a process for deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="workspaces-and-repositories">Workspaces and repositories</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bonita-bpm-installation-overview">Bonita BPM installation overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bonita-bpm-studio-installation">Bonita BPM Studio installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Basic Bonita BPM Platform installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="hardware-and-software-requirements">Hardware and software requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="tomcat-bundle">Tomcat bundle</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="wildfly-bundle">WildFly bundle</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="deploy-bundle">Deploy bundle</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="BonitaBPM_platform_setup">Platform configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="database-configuration">Database creation and customization to work with Bonita BPM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="first-steps-after-setup">First steps after setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="licenses">Licenses</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Advanced Bonita BPM Platform installation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security and authentication</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="user-authentication-overview">User authentication overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="active-directory-or-ldap-authentication">Active Directory or LDAP authentication</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="single-sign-on-with-cas">Single sign-on with CAS</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="single-sign-on-with-saml">Single sign-on with SAML</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="enforce-password-policy">Enforce password policy</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="rest-api-authorization">REST API authorization</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="csrf-security">CSRF security</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="enable-cors-in-tomcat-bundle">Enable CORS in Tomcat bundle</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="ssl">SSL</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="tenant_admin_credentials">Tenant administrator credentials</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="set-log-and-archive-levels">Set log and archive levels</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configurable-archive">Configurable Archive</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="performance-tuning">Performance tuning</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="performance-troubleshooting">Performance troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="use-gzip-compression">Use gzip compression</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="two-main-types-of-deployment">Two main types of deployment</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Bonita BPM in a cluster</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="overview-of-bonita-bpm-in-a-cluster">Overview of Bonita BPM in a cluster</a>
  </li>
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="install-a-bonita-bpm-cluster">Install a Bonita BPM cluster</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="cluster-administration">Cluster administration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="multi-tenancy-and-tenant-configuration">Multi-tenancy and tenant configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Platform installation examples</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="ubuntu-openjdk-tomcat-postgresql">Ubuntu + OpenJDK + Tomcat + PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bonita-as-windows-service">Install Tomcat with Bonita as a service in Windows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="back-up-bonita-bpm-platform">Back up Bonita BPM Platform</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="migration-overview">Migration overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="migrate-from-an-earlier-version-of-bonita-bpm">Migrate from an earlier version of Bonita BPM</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrade-from-community-to-a-subscription-edition">Community to Subscription upgrade</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Bonita BPM Portal Administration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Bonita BPM Portal interface</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bonita-bpm-portal-interface-overview">Bonita BPM Portal overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="user-task-list">User task list</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="languages">Languages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="log-in-and-log-out">Log in and log out</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="about">About Bonita BPM Portal</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mobile-portal">Mobile Portal</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Process maintenance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="processes">Processes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="cases">Cases</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="tasks">Tasks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="subtasks">Subtasks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="monitoring">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pause-and-resume-bpm-services">Pause and resume BPM services</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bdm-management-in-bonita-bpm-portal">BDM Management in Bonita BPM Portal</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="applications">Applications</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Resources</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="resource-management">Resource management</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="pages">Pages</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="forms">Forms</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="layouts">Layouts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="themes">Themes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="api-extensions">REST API extensions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="live-update">Live update</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Organization in Bonita BPM Portal</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="organization-in-bonita-bpm-portal-overview">Organization in Bonita BPM Portal overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Organization maintenance</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="import-export-an-organization">Import/export an organization</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="group">Manage groups</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="role">Manage roles</a>
  </li>
  <li class="nav-item" data-depth="4">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Manage users</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="manage-a-user">Manage a user</a>
  </li>
  <li class="nav-item" data-depth="5">
    <a class="nav-link" href="deactivate-a-user">Deactivate a user</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="custom-user-information-in-bonita-bpm-portal">Custom User Information in Bonita BPM Portal</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="analytics">Analytics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">User profiles</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="profiles-overview">Profiles overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="administrator-rights">Administrator rights</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="process-manager">Process manager</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="custom-profiles">Custom profiles</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="deploying-profiles-with-export-and-import">Deploy profiles with export and import</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Look &amp; Feel</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="managing-look-feel">Manage Look &amp; Feel</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="creating-a-new-look-feel">Create a new Look &amp; Feel</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="search-index">Search keys</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="software-extensibility">Software extensibility</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Bonita BPM artifacts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Connectors</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="connectors-overview">Connectors overview</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="connector-development-toolkit">Connector development toolkit</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="creating-an-actor-filter">Create an actor filter</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="api-glossary">API glossary</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">REST API</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="rest-api-overview">REST API overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="application-api">application API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bdm-api">bdm API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="bpm-api">bpm API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="customuserinfo-api">customuserinfo API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="form-api">form API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="identity-api">identity API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="platform-api">platform API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="portal-api">portal API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="system-api">system API</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="rest-api-extensions">REST API extensions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="manage-files-using-upload-servlet-and-rest-api">Manage files using upload servlet and REST API</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Engine API</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="engine-api-overview">Engine API overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="create-your-first-project-with-the-engine-apis-and-maven">Create your first project with the Engine APIs and Maven</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configure-client-of-bonita-bpm-engine">Configure connection to Bonita BPM Engine</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="http://documentation.bonitasoft.com/javadoc/api/$7.5/index.html">Javadoc</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Examples</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manage-a-process">Manage a process</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="handle-a-failed-activity">Handle a failed activity</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manage-an-organization">Manage an organization</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manage-users">Manage users</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="handling-documents">Handle documents</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="create-administration-tools">Create administration tools</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="restore-default-look-feel">Restore the default Look &amp; Feel</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="manage-the-platform">Manage the platform</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="using-list-and-search-methods">List and search methods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="log-in-with-cas">Log in with CAS</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bonita-bpm-portal-urls">Bonita BPM Portal URLs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Bonita BPM Engine architecture</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="engine-architecture-overview">Bonita BPM Engine architecture overview</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="event-handlers">Event handlers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="queriable-logging">Queriable logger</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="technical-logging">Technical logger</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="execution-sequence-states-and-transactions">Execution sequence, states, and transactions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="shared-transactions">Shared transactions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Living application</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="customize-living-application-layout">Customize living application layout</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logging">Logs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="preloading-the-forms-cache">Preload the forms cache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="building-community-edition-from-source">Build Bonita BPM Community edition from source files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Continuous integration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="automating-builds">Automate builds</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="set-up-continuous-integration">Set up continuous integration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Howtos</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="uid-modal-tutorial">Create a modal window using CSS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="uid-case-overview-tutorial">Create a case overview page using the UI Designer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="optimize-user-tasklist">Create unique task names for the user task list</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="manage-control-in-forms">Control and validate forms in the UI Designer</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="list-of-documents">Manage a list of documents</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="bo-multiple-refs-tutorial">Manage multiple references in Business Objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="custom-authorization-rule-mapping">Map authorization rules</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rta-mail-template">Use the rich textarea widget in a mail template</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="datetimes-management-tutorial">Manage dates and times in BDM and User Interfaces</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Bonita</span>
    <span class="version">7.5</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Bonita</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="./">7.5</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Bonita ICI</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../bici/latest/">labs</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="./" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="./">Bonita</a></li>
    <li>Installation</li>
    <li>Advanced Bonita BPM Platform installation</li>
    <li>Bonita BPM in a cluster</li>
    <li><a href="install-a-bonita-bpm-cluster">Install a Bonita BPM cluster</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/bonitasoft/bonita-doc/edit/7.5_new/modules/ROOT/pages/install-a-bonita-bpm-cluster.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">Install a Bonita BPM cluster</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>NOTE:
<strong>Note:</strong> The cluster feature is a Subscription feature for <strong>Performance</strong> edition only.</p>
</div>
<div class="paragraph">
<p>WARNING:
It is possible to manage the lifecycle of a node using the API to connect directly to the node, but this bypasses the load balancer so should be done with care and only in exceptional circumstances.</p>
</div>
<div class="paragraph">
<p>You will learn here how to create a cluster in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a cluster from scratch</p>
</li>
<li>
<p>Convert a single node installation into a cluster</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_note_when_using_the_aws_support"><a class="anchor" href="#_note_when_using_the_aws_support"></a>Note when using the AWS support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please read the following to ensure that Bonita Cluster works correctly on AWS.</p>
</div>
<div class="sect2">
<h3 id="_add_a_jar_to_the_bonita_war"><a class="anchor" href="#_add_a_jar_to_the_bonita_war"></a>Add a jar to the Bonita war</h3>
<div class="paragraph">
<p>To proceed</p>
</div>
<div class="ulist">
<ul>
<li>
<p>download the <a href="http://repo1.maven.org/maven2/com/hazelcast/hazelcast-cloud/3.6.5/">hazelcast-cloud-3.6.5.jar</a></p>
</li>
<li>
<p>ensure that Bonita is stopped</p>
</li>
<li>
<p>add the jar to the bonita war and the bonita folder (the jar must be stored in the <code>WEB-INF/lib</code> subfolder of these 2
elements)</p>
</li>
<li>
<p>the hazelcast aws support will be fully available at next Bonita startup</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_iam_role_configuration"><a class="anchor" href="#_iam_role_configuration"></a>IAM role configuration</h3>
<div class="paragraph">
<p>If you want to use IAM role for EC2 autodiscovery, you need to attach a role to your EC2 instances with a policy allowing "ec2:DescribeInstances" action. For details about IAM Roles for Amazon EC2 see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html">AWS documentation</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_a_cluster_from_scratch"><a class="anchor" href="#_create_a_cluster_from_scratch"></a>Create a cluster from scratch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this part we will create a cluster from scratch. We will initialize the database on which the cluster will run, then we will configure nodes to run on this cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_allow_communication_between_servers"><a class="anchor" href="#_allow_communication_between_servers"></a>Allow communication between servers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bonita cluster uses Hazelcast as the distributed cluster dispatcher layer.
Hazelcast needs the port 5701 (by default) to be opened on all the servers that compose the cluster.
Ensure that these ports are opened in all the nodes of your cluster.</p>
</div>
<div class="sect2">
<h3 id="create_init_bonita_db"><a class="anchor" href="#create_init_bonita_db"></a>Create and initialize the database for Bonita BPM Platform</h3>
<div class="paragraph">
<p>In this step you will create and initialize the database for the Bonita BPM Platform cluster using the <a href="BonitaBPM_platform_setup" class="page">platform setup tool</a>.
When done you will have a database with all tables created and with a table <code>CONFIGURATION</code> containing all configuration required for the cluster to start.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ensure that you meet the <a href="hardware-and-software-requirements" class="page">requirements</a>.</p>
</li>
<li>
<p><a href="database-configuration.md#database_creation">Create the database</a>.</p>
</li>
<li>
<p>In case you use <a href="define-and-deploy-the-bdm" class="page">Business data</a>, <a href="database-configuration.md#database_creation">create a database for the Business Data</a>.</p>
</li>
<li>
<p>Download a Bonita BPM <a href="tomcat-bundle" class="page">Tomcat bundle</a> or a Bonita BPM <a href="wildfly-bundle" class="page">WildFly bundle</a>, and unzip it at some place of your choice.</p>
</li>
<li>
<p>Edit file <strong><code>setup/database.properties</code></strong> and modify the properties to suit your databases (Bonita BPM internal database &amp; Business Data database).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the following steps, you will update the configuration files that are in the <code>setup/platform_conf/initial</code> folder of the platform setup tool.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the file <code>setup/platform_conf/initial/platform_init_engine/bonita-platform-init-community-custom.properties</code> uncomment and update the value of <code>activeProfiles</code> property from <strong><code>community</code></strong> to <strong><code>community,performance</code></strong>, as follows: <code>activeProfiles=community,performance</code></p>
</li>
<li>
<p>Edit the file <code>setup/platform_conf/initial/platform_engine/bonita-platform-sp-custom.properties</code>: Uncomment and set the <strong><code>bonita.cluster</code></strong> property to <code>true</code>, as follows: <code>bonita.cluster=true</code></p>
</li>
<li>
<p>Edit the file <code>setup/platform_conf/initial/platform_engine/bonita-platform-sp-custom.properties</code>: <a id="disable-hibernate-cache"></a>In order to keep consistency between nodes, the Hibernate cache must be disabled:
Uncomment and change the line:
   <code>#bonita.platform.persistence.use_second_level_cache=true</code>
 change it to:
   <code>bonita.platform.persistence.use_second_level_cache=false</code></p>
</li>
<li>
<p>Edit the file <code>setup/platform_conf/initial/platform_engine/bonita-platform-sp-cluster-custom.properties</code>: uncomment and set the <strong><code>bonita.cluster.name</code></strong> property to a name of your own, e.g. <code>myBPMCluster</code>, <strong>This name must be unique on the local network if you are using <em>multicast</em></strong></p>
</li>
<li>
<p>Edit the file <code>setup/platform_conf/initial/platform_engine/bonita-platform-sp-cluster-custom.properties</code>: set to <code>true</code> one of <code>bonita.platform.cluster.hazelcast.multicast.enabled</code> or <code>bonita.platform.cluster.hazelcast.tcpip.enabled</code> or <code>bonita.platform.cluster.hazelcast.aws.enabled</code>, as follows:
Uncomment the # properties and set only one of them to <code>true</code>, set the others to <code>false</code> depending on how you want your nodes to discover each others.
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"> bonita.platform.cluster.hazelcast.multicast.enabled=false
 bonita.platform.cluster.hazelcast.tcpip.enabled=true
 bonita.platform.cluster.hazelcast.tcpip.members=ipServer01,ipServer02</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you don&#8217;t use <code>bonita.platform.cluster.hazelcast.multicast.enabled</code>, <strong>you must uncomment the # properties and set it to <code>false</code></strong> to deactivate it, as follows: <code>bonita.platform.cluster.hazelcast.multicast.enabled=false</code>.
For more information on this take a look at the <a href="http://docs.hazelcast.org/docs/3.4/manual/html-single/hazelcast-documentation.html#hazelcast-cluster-discovery">Hazelcast Documentation</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Copy licenses of all your nodes in <code>setup/platform_conf/licenses</code>.</p>
</li>
<li>
<p>Run <code>setup.sh init</code> or <code>setup.bat init</code> as described in the <a href="BonitaBPM_platform_setup.md#init_platform_conf">platform setup tool page</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>At the end of the script, you should see the following line: "Initial configuration files successfully pushed to database".
This creates the database tables needed by Bonita BPM platform, stores the configuration into this database, and stores the licence files for all your cluster nodes into the database.</p>
</div>
<div class="paragraph">
<p>If later you need to change the configuration of the node discovery or add new licenses to the Bonita BPM Platform configuration, you can update the configuration by following this <a href="BonitaBPM_platform_setup.md#update_platform_conf">guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="install_first_node"><a class="anchor" href="#install_first_node"></a>Install a first node</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Once you have done all the steps from section <strong>Create and initialize the database for Bonita BPM Platform</strong> above,  run <code>setup.sh configure</code> or <code>setup.bat configure</code> as described in the <a href="BonitaBPM_platform_setup.md#run_bundle_configure">Bundle configuration</a> to have your Tomcat / WildFly bundle configured to point to the right database.</p>
</li>
<li>
<p>Once the bundle is configured, and to avoid unsynchronized versions of the configuration files between several nodes, you are advised to delete
the folder <code>[TOMCAT_DIRECTORY]/setup</code> and its entire content.
Note:  if you want to keep it for future configuration changes, just move the folder <code>[TOMCAT_DIRECTORY]/setup</code> and its entire content outside the <code>[TOMCAT_DIRECTORY]</code>
to use it as your main  <a href="BonitaBPM_platform_setup.md#init_platform_conf">platform setup tool</a>.</p>
</li>
<li>
<p>If your Bonita installation is behind a proxy or is installed inside a Docker container (mainly in TcpIp or Aws
discovery modes), you must declare its public address by adding the following property:
<code>-Dhazelcast.local.publicAddress=<strong>publicaddress</strong></code>, this property should be added in the <code>[TOMCAT_DIRECTORY]/setup/tomcat-templates/setenv.sh</code> or <code>[TOMCAT_DIRECTORY]/setup/tomcat-templates/setenv.bat</code></p>
</li>
<li>
<p>When the installation is complete, start Tomcat on the node. This starts Bonita BPM Platform:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./start-bonita.sh</code></pre>
</div>
</div>
</li>
<li>
<p>Then start the cluster in the load balancer.</p>
</li>
<li>
<p>Check that the log file contains messages of the following form:</p>
<div class="listingblock">
<div class="content">
<pre> March 22, 2016 5:07:07 PM INFO: com.hazelcast.cluster.ClusterService [10.0.5.3]:5701 [myBPMCluster]

 Members [1] {
         Member [10.0.5.3]:5701 this
 }
 [...]
 March 22, 2016 5:09:18 PM INFO: org.apache.catalina.startup.Catalina start Server startup in 30333 ms</pre>
</div>
</div>
</li>
<li>
<p>Then deploy a basic process and check that it runs correctly, to validate the installation.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_add_a_node_to_the_cluster"><a class="anchor" href="#_add_a_node_to_the_cluster"></a>Add a node to the cluster</h3>
<div class="paragraph">
<p>You can add a new node to a cluster without interrupting service on the existing nodes.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the entire Tomcat / WildFly directory to another machine.</p>
</li>
<li>
<p>If Hazelcast Node discovery is configured with TCP, update the configuration in database using the <a href="BonitaBPM_platform_setup" class="page">platform setup tool</a>, as follows:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run the <code>setup.sh pull</code> or <code>setup.bat pull</code>. This will retrieve the configuration of your platform under <code>platform_conf/current</code> folder.</p>
</li>
<li>
<p>Edit the file <code>platform_conf/current/platform_engine/bonita-platform-sp-cluster-custom.properties</code> and add the node to the list of members as follows for example: <code>bonita.platform.cluster.hazelcast.tcpip.members=ipServer01,ipServer02,ipServer03</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Start the Tomcat on the new node, running <code>./start-bonita.sh</code> script</p>
</li>
<li>
<p>Update the load balancer configuration to include the new node.
The log file will contain messages of the following form:</p>
<div class="listingblock">
<div class="content">
<pre> March 22, 2016 5:12:53 PM INFO: com.hazelcast.cluster.ClusterService [10.0.5.17]:5701 [myBPMCluster]

 Members [2] {
         Member [10.0.5.3]:5701
         Member [10.0.5.17]:5701 this
 }
 [...]
 March 22, 2016 5:12:28 PM INFO: org.apache.coyote.http11.Http11Protocol start Starting Coyote HTTP/1.1 on http-7280
 March 22, 2016 5:12:28 PM INFO: org.apache.catalina.startup.Catalina start Server startup in 30333 ms</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the log, you can see how many nodes are in the cluster, and their IP addresses and port number. This node that has been started is indicated by <code>this</code>.
The new node is now available to perform work as directed by the load balancer.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_convert_a_single_node_installation_into_a_cluster"><a class="anchor" href="#_convert_a_single_node_installation_into_a_cluster"></a>Convert a single node installation into a cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this case you already have a Bonita BPM Platform running as single node installation, you will change the configuration to make it able to have multiple nodes.</p>
</div>
<div class="sect2">
<h3 id="_update_the_configuration_in_database"><a class="anchor" href="#_update_the_configuration_in_database"></a>Update the configuration in database</h3>
<div class="paragraph">
<p>Some properties of the Bonita BPM Platform needs to be changed in order to make your installation work as a cluster node.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the Bonita BPM <a href="deploy-bundle" class="page">Deploy bundle</a> and unzip it at some place of your choice.
NOTE:
The platform setup tool is also present in the Tomcat or WildFly bundle under the <code>setup</code> directory.</p>
</li>
<li>
<p>Configure it as described in the <a href="BonitaBPM_platform_setup" class="page">platform setup tool page</a></p>
</li>
<li>
<p>Run the <code>setup.sh pull</code> or <code>setup.bat pull</code>. This will retrieve the configuration of your platform under <code>platform_conf/current</code> folder.</p>
</li>
<li>
<p>Update configuration files that are in the <code>platform_conf/current</code> folder of the platform setup tool.</p>
<div class="ulist">
<ul>
<li>
<p>In <code>platform_init_engine/bonita-platform-init-community-custom.properties</code> uncomment and update the value of <code>activeProfiles</code> property from <strong><code>community</code></strong> to <strong><code>community,performance</code></strong>.</p>
</li>
<li>
<p>In <code>platform_engine/bonita-platform-sp-custom.properties</code></p>
<div class="ulist">
<ul>
<li>
<p>uncomment and set the <strong><code>bonita.cluster</code></strong> property to <code>true</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In <code>platform_engine/bonita-platform-sp-cluster-custom.properties</code></p>
<div class="ulist">
<ul>
<li>
<p>uncomment and set the <strong><code>bonita.cluster.name</code></strong> property to a name of your own, e.g. <code>myBPMCluster</code>, <strong>This name must be unique on the local network if you are using <em>multicast</em></strong></p>
</li>
<li>
<p>set one of <code>bonita.platform.cluster.hazelcast.multicast.enabled</code>, <code>bonita.platform.cluster.hazelcast.tcpip.enabled</code> and <code>bonita.platform.cluster.hazelcast.aws.enabled</code> to <code>true</code>:
uncomment the # properties and set only one of them to <code>true</code>, set the others to <code>false</code> depending on how you want your nodes to discover each others,
for more information on this take a look at the <a href="http://docs.hazelcast.org/docs/3.4/manual/html-single/index.html#discovering-cluster-members">Hazelcast Documentation</a>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In <code>platform_engine/bonita-platform-sp-custom.properties</code>: In order to keep consistency between nodes, the Hibernate cache must be disabled:
Uncomment and change the line:
<code>#bonita.platform.persistence.use_second_level_cache=true</code>
  change it to:
<code>bonita.platform.persistence.use_second_level_cache=false</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Copy licenses of all your nodes in <code>platform_conf/licenses</code></p>
</li>
<li>
<p>Run the <code>setup.sh push</code> or <code>setup.bat push</code>. This will update in database the configuration of your platform.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_configure_nodes_to_run_on_this_cluster"><a class="anchor" href="#_configure_nodes_to_run_on_this_cluster"></a>Configure nodes to run on this cluster</h3>
<div class="paragraph">
<p>The configuration of the node you were using is still valid. You should be able to run it without any issue.</p>
</div>
<div class="paragraph">
<p>If your Bonita installation is behind a proxy or is installed inside a Docker container, please refer to the
<a href="#install_first_node">Install a first node part</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cluster_management"><a class="anchor" href="#_cluster_management"></a>Cluster management</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_stop_a_node"><a class="anchor" href="#_stop_a_node"></a>Stop a node</h3>
<div class="paragraph">
<p>Simply run <code>./stop-bonita.sh</code> script.</p>
</div>
</div>
<div class="sect2">
<h3 id="_remove_a_node_from_a_cluster"><a class="anchor" href="#_remove_a_node_from_a_cluster"></a>Remove a node from a cluster</h3>
<div class="paragraph">
<p>This section explains how to perform a planned shutdown and remove a node from the cluster.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Update the load balancer configuration so that no further work is directed to the node. All work that is already in progress on the node that will be shutdown
will continue until completion. Do not remove the node completely, because the load balancer needs to be informed when current work is finished.</p>
</li>
<li>
<p>Allow current activity instances to complete.</p>
</li>
<li>
<p>Stop the Tomcat server: run <code>./stop-bonita.sh</code></p>
</li>
<li>
<p>Update the load balancer to remove the node from the cluster.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The node is now removed from the cluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dismantle_a_cluster"><a class="anchor" href="#_dismantle_a_cluster"></a>Dismantle a cluster</h3>
<div class="paragraph">
<p>To dismantle a cluster:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Disable processes.</p>
</li>
<li>
<p>Allow current activity instances to complete.</p>
</li>
<li>
<p>When each node has finished executing, stop it.</p>
</li>
<li>
<p>When all nodes have been stopped, update the load balancer to remove the cluster.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The individual nodes can now be used as standalone Bonita BPM server, provided the following change in the configuration is done:
Update file <code>bonita-platform-sp-custom.properties</code> located in the <code>platform_engine</code> folder of the configuration, use the <a href="BonitaBPM_platform_setup.md#configuration_files">platform setup tool</a> to update it and set back the <strong><code>bonita.cluster</code></strong> property to <strong><code>false</code></strong>.</p>
</div>
<div class="paragraph">
<p>See <a href="BonitaBPM_platform_setup.md#updating_configuration">How to update a Bonita BPM Tomcat Bundle configuration</a> for more details on updating the configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="_managing_the_cluster_with_hazelcast"><a class="anchor" href="#_managing_the_cluster_with_hazelcast"></a>Managing the cluster with Hazelcast</h3>
<div class="paragraph">
<p>As said before, Bonita BPM cluster uses Hazelcast as the distributed cluster dispatcher layer. Therefore you can use the Hazelcast tools to manage the cluster topology.
See the <a href="http://www.hazelcast.com/docs.jsp">Hazelcast documentation</a> for details.</p>
</div>
<div class="paragraph">
<p>Note that a Bonita BPM cluster uses multicast for discovery by default. You can disable this in Hazelcast.
If you are using multicast, you must ensure that your production environment is insulated from any test environment that might also contain cluster nodes.
This is to ensure the nodes do not discover each other on the network, if they are not supposed to run inside the same cluster.</p>
</div>
<div class="paragraph">
<p>It is possible to have more than one cluster on the same network. In this case, you must configure the cluster names to be sure that it is clear which node belongs to which cluster.
You can configure the cluster name through Hazelcast or by updating <code>bonita-platform-sp-custom.properties</code> located in the <code>platform_engine</code> folder of the configuration, use the <a href="BonitaBPM_platform_setup.md#configuration_files">platform setup tool</a> to update it.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faq"><a class="anchor" href="#_faq"></a>FAQ</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Q</strong>: I regularly get this warning message when 2 or more nodes are started in cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-log hljs" data-lang="log">2016-06-13 11:41:22.783 +0200 WARNING: org.bonitasoft.engine.scheduler.impl.BonitaJobStoreCMT This scheduler instance (...) is still active but was recovered by another instance in the cluster.  This may cause inconsistent behavior.</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Symptom</strong>:
The clocks of the servers are not synchronized.</p>
</div>
<div class="paragraph">
<p><strong>Resolution</strong>:
The system time of all cluster nodes must be maintained in synchronization with time servers.
It is a good idea to have also the db server system time synchronized too.
Synchronize the system time of all nodes and restart application servers.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>

<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js"></script>
<script>
  docsearch({
    // Your apiKey and indexName will be given to you once
    // we create your config
    apiKey: '8b16fe941025bb59db192dce337bc486',
    indexName: 'test_BONITA',
    appId: 'LMVLEZKT54', // Should be only included if you are running DocSearch on your own.
    // Replace inputSelector with a CSS selector
    // matching your search input
    inputSelector: '#search-query',
    // Set debug to true to inspect the dropdown
    debug: false,
    algoliaOptions: {
      'facetFilters': ["tags:7.5", "tags:bonita"]
    },
  });
</script>
  </body>
</html>
